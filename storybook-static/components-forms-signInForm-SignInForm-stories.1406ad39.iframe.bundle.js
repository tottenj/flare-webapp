"use strict";(self.webpackChunkflare_webapp=self.webpackChunkflare_webapp||[]).push([[135],{"./src/components/forms/signInForm/SignInForm.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>SignInForm_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),index_esm=__webpack_require__("./node_modules/firebase/auth/dist/esm/index.esm.js"),esm_index_esm=__webpack_require__("./node_modules/firebase/app/dist/esm/index.esm.js"),dist_esm_index_esm=__webpack_require__("./node_modules/firebase/firestore/dist/esm/index.esm.js"),storage_dist_esm_index_esm=__webpack_require__("./node_modules/firebase/storage/dist/esm/index.esm.js");const firebaseconfig={apiKey:"AIzaSyDj5h2HzdQYuOzV_UVTHiwx1golUW93INU",authDomain:"flare-7091a.firebaseapp.com",projectId:"flare-7091a",storageBucket:"flare-7091a.firebasestorage.app",messagingSenderId:"192465328955",appId:"1:192465328955:web:108bbe86f58f4bbcb2f51e",measurementId:"G-JR9NDGTPV9"},fireBaseApp=(0,esm_index_esm.Wp)(firebaseconfig),clientApp_auth=(0,index_esm.xI)(fireBaseApp),db=(0,dist_esm_index_esm.aU)(fireBaseApp);(0,storage_dist_esm_index_esm.c7)(fireBaseApp);var Collections=function(Collections){return Collections.Users="Users",Collections}(Collections||{});const collections=Collections;var console=__webpack_require__("./node_modules/console-browserify/index.js");async function signInWithGoogle(){const provider=new index_esm.HF;try{const user=(await(0,index_esm.df)(clientApp_auth,provider)).user,userData=await async function getUserById(uid,dab=db){const docRef=(0,dist_esm_index_esm.H9)(dab,collections.Users,uid),document=await(0,dist_esm_index_esm.x7)(docRef);return document.exists()?document.data():null}(user.uid);if(userData)return userData;{const docRef=(0,dist_esm_index_esm.H9)(db,collections.Users,user.uid);await(0,dist_esm_index_esm.BN)(docRef,{id:user.uid})}}catch(error){console.error("Error signing in with Google",error)}}function GoogleSignInButton({signIn}){return(0,jsx_runtime.jsxs)("button",{onClick:signInWithGoogle,className:"flex items-center justify-center rounded-lg border border-gray-300 bg-white px-4 py-2 font-medium text-gray-700 shadow-sm transition duration-300 hover:bg-gray-100",children:[(0,jsx_runtime.jsx)("img",{src:"https://developers.google.com/identity/images/g-logo.png",alt:"Google logo",className:"mr-3 h-5 w-5"}),"Sign ",signIn?"In":"Up"," With Google"]})}function TextInput({label,name,placeholder,password=!1}){return(0,jsx_runtime.jsxs)("div",{className:"mb-4 flex flex-col",children:[(0,jsx_runtime.jsx)("label",{className:"font-nunito mb-2 font-black",children:label}),(0,jsx_runtime.jsx)("input",{className:"bg-tertiary text-secondary rounded-2xl p-2 pl-4",type:password?"password":"text",placeholder,name})]})}async function emailAndPasswordAction(prevState,formData){var _formData_get,_formData_get1;const rawFormData={email:null===(_formData_get=formData.get("email"))||void 0===_formData_get?void 0:_formData_get.toString(),password:null===(_formData_get1=formData.get("password"))||void 0===_formData_get1?void 0:_formData_get1.toString()};if(!rawFormData.email||!rawFormData.password)return{message:"Error with email or password"};{const{email,password}=rawFormData;try{return await(0,index_esm.eJ)(clientApp_auth,email,password),{message:"User created successfully"}}catch(error){return"auth/email-already-in-use"===error.code?{message:"Email is already in use"}:{message:"An error occurred. Please try again."}}}}GoogleSignInButton.__docgenInfo={description:"",methods:[],displayName:"GoogleSignInButton",props:{signIn:{required:!0,tsType:{name:"boolean"},description:""}}},TextInput.__docgenInfo={description:"",methods:[],displayName:"TextInput",props:{label:{required:!0,tsType:{name:"string"},description:""},name:{required:!0,tsType:{name:"string"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},password:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};var SubmitButton=__webpack_require__("./src/components/inputs/submitButton/SubmitButton.tsx"),dist=__webpack_require__("./node_modules/react-toastify/dist/index.mjs");function SignInForm(){const[state,formAction,pending]=(0,react.useActionState)(emailAndPasswordAction,{message:""});return function useActionToast(state,pending,{successMessage="Success!",loadingMessage="Processing..."}={}){const toastId=(0,react.useRef)(null);(0,react.useEffect)((()=>{pending&&!toastId.current&&(toastId.current=dist.oR.loading(loadingMessage))}),[pending,loadingMessage]),(0,react.useEffect)((()=>{!pending&&(null==state?void 0:state.message)&&(toastId.current&&(dist.oR.dismiss(toastId.current),toastId.current=null),"User created successfully"===state.message?dist.oR.success(successMessage):dist.oR.error(state.message))}),[pending,state,successMessage])}(state,pending,{successMessage:"User created successfully",loadingMessage:"Creating your account"}),(0,jsx_runtime.jsxs)("div",{className:"@container flex w-5/6 lg:w-1/2 flex-col items-center rounded-xl bg-white p-10",children:[(0,jsx_runtime.jsx)("h1",{className:"mb-4",children:"Sign Up"}),(0,jsx_runtime.jsxs)("form",{action:formAction,className:"mb-8 w-5/6 @lg:w-2/3",children:[(0,jsx_runtime.jsx)(TextInput,{label:"Email",name:"email",placeholder:"example@gmail.com"}),(0,jsx_runtime.jsx)(TextInput,{label:"Password",name:"password",placeholder:"**********"}),(0,jsx_runtime.jsx)("div",{className:"flex justify-center",children:(0,jsx_runtime.jsx)(SubmitButton.A,{disabled:pending})})]}),(0,jsx_runtime.jsx)(GoogleSignInButton,{signIn:!1})]})}SignInForm.__docgenInfo={description:"",methods:[],displayName:"SignInForm"};const SignInForm_stories={decorators:[Story=>(0,jsx_runtime.jsx)("div",{className:"flex w-[95vw] justify-center",children:(0,jsx_runtime.jsx)(Story,{})})],component:SignInForm,title:"Forms/Login Form",parameters:{layout:"centered",backgrounds:{default:"grad"}}},Default={},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}}},"./src/components/inputs/submitButton/SubmitButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>SubmitButton});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js");function SubmitButton({text="Submit",disabled=!1}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{disabled,className:"border-primary font-nunito hover:text-primary bg-primary mt-4 w-full cursor-pointer rounded-xl border-2 p-2 font-bold text-white transition-all duration-300 ease-in-out hover:bg-white",children:text})}SubmitButton.__docgenInfo={description:"",methods:[],displayName:"SubmitButton",props:{text:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Submit'",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}}}}]);